/* gb_io.c */
# include "gb_io.h"
# include "gb.h"

void gb_io_init(struct gb *gb)
{
  byte *io = gb->mem.io;
  io[IO_TIMA - 0xFF00] = 0x00;
  io[IO_TMA  - 0xFF00] = 0x00;
  io[IO_TAC  - 0xFF00] = 0x00;
  io[IO_NR10 - 0xFF00] = 0x80;
  io[IO_NR11 - 0xFF00] = 0xBF;
  io[IO_NR12 - 0xFF00] = 0xF3;
  io[IO_NR14 - 0xFF00] = 0xBF;
  io[IO_NR21 - 0xFF00] = 0x3F;
  io[IO_NR22 - 0xFF00] = 0x00;
  io[IO_NR24 - 0xFF00] = 0xBF;
  io[IO_NR30 - 0xFF00] = 0x7F;
  io[IO_NR31 - 0xFF00] = 0xFF;
  io[IO_NR32 - 0xFF00] = 0x9F;
  io[IO_NR33 - 0xFF00] = 0xBF;
  io[IO_NR41 - 0xFF00] = 0xFF;
  io[IO_NR42 - 0xFF00] = 0x00;
  io[IO_NR43 - 0xFF00] = 0x00;
  io[IO_NR44 - 0xFF00] = 0xBF;
  io[IO_NR50 - 0xFF00] = 0x77;
  io[IO_NR51 - 0xFF00] = 0xF3;
  io[IO_NR52 - 0xFF00] = 0xF0;
  io[IO_LCDC - 0xFF00] = 0x91;
  io[IO_SCY  - 0xFF00] = 0x00;
  io[IO_SCX  - 0xFF00] = 0x00;
  io[IO_LYC  - 0xFF00] = 0x00;
  io[IO_BGP  - 0xFF00] = 0xFC;
  io[IO_OBP0 - 0xFF00] = 0xFF;
  io[IO_OBP1 - 0xFF00] = 0xFF;
  io[IO_WY   - 0xFF00] = 0x00;
  io[IO_WX   - 0xFF00] = 0x00;
  io[IO_KEY1 - 0xFF00] = 0x00;
}

char const * const gb_io_str[0x100] = {
#define ENUM_TO_STR(NAME) [NAME - 0xFF00] = #NAME
	ENUM_TO_STR(IO_P1),
	ENUM_TO_STR(IO_SB),
	ENUM_TO_STR(IO_SC),
	ENUM_TO_STR(IO_DIV),
	ENUM_TO_STR(IO_TIMA),
	ENUM_TO_STR(IO_TMA),
	ENUM_TO_STR(IO_TAC),
	ENUM_TO_STR(IO_IF),
	ENUM_TO_STR(IO_NR10),
	ENUM_TO_STR(IO_NR11),
	ENUM_TO_STR(IO_NR12),
	ENUM_TO_STR(IO_NR13),
	ENUM_TO_STR(IO_NR14),
	ENUM_TO_STR(IO_NR21),
	ENUM_TO_STR(IO_NR22),
	ENUM_TO_STR(IO_NR23),
	ENUM_TO_STR(IO_NR24),
	ENUM_TO_STR(IO_NR30),
	ENUM_TO_STR(IO_NR31),
	ENUM_TO_STR(IO_NR32),
	ENUM_TO_STR(IO_NR33),
	ENUM_TO_STR(IO_NR34),
	ENUM_TO_STR(IO_NR41),
	ENUM_TO_STR(IO_NR42),
	ENUM_TO_STR(IO_NR43),
	ENUM_TO_STR(IO_NR44),
	ENUM_TO_STR(IO_NR50),
	ENUM_TO_STR(IO_NR51),
	ENUM_TO_STR(IO_NR52),
	ENUM_TO_STR(IO_FF3F),
	ENUM_TO_STR(IO_LCDC),
	ENUM_TO_STR(IO_STAT),
	ENUM_TO_STR(IO_SCY),
	ENUM_TO_STR(IO_SCX),
	ENUM_TO_STR(IO_LY),
	ENUM_TO_STR(IO_LYC),
	ENUM_TO_STR(IO_DMA),
	ENUM_TO_STR(IO_BGP),
	ENUM_TO_STR(IO_OBP0),
	ENUM_TO_STR(IO_OBP1),
	ENUM_TO_STR(IO_WY),
	ENUM_TO_STR(IO_WX),
	ENUM_TO_STR(IO_KEY1),
	ENUM_TO_STR(IO_VBK),
	ENUM_TO_STR(IO_HDMA1),
	ENUM_TO_STR(IO_HDMA2),
	ENUM_TO_STR(IO_HDMA3),
	ENUM_TO_STR(IO_HDMA4),
	ENUM_TO_STR(IO_HDMA5),
	ENUM_TO_STR(IO_RP),
	ENUM_TO_STR(IO_BCPS),
	ENUM_TO_STR(IO_BCPD),
	ENUM_TO_STR(IO_OCPS),
	ENUM_TO_STR(IO_OCPD),
	ENUM_TO_STR(IO_SVBK),
	ENUM_TO_STR(IO_IE),
#undef ENUM_TO_STR
};

